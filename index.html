<!-- reference: https://web-engineering.info/tech/JsFrontendApp/book/ch03.html-->

<!DOCTYPE html>
<html>

<head>
    <title>
        UML Editor
    </title>

    <link rel="stylesheet" type="text/css" href="umlCss2.css">
    <link rel= "stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    

    <script src="c/initialize.js"></script>
    <script src="m/UMLClass.js"></script>
    <script src="v/guiView.js"></script>
    <script src="v/instructions.js"></script>
    <script src="c/setUpGUI.js"></script>
    <script src="v/cliView.js"></script>
    <script src="c/parser.js"></script>
    <script src="m/Edge.js"></script>
    <!-- <script src="boxLogic.js"></script> -->
    <script>
        //Make the DIV element draggagle:
dragElement(document.getElementById("classBox"));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "classBox")) {
    /* if present, the header is where you move the DIV from:*/
    document.getElementById(elmnt.id + "classBox").onmousedown = dragMouseDown;
  } else {
    /* otherwise, move the DIV from anywhere inside the DIV:*/
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    /* stop moving when mouse button is released:*/
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
    </script>
    <script>
        window.addEventListener("load", pl.c.setUpGUI);
        window.addEventListener("load", pl.v.commandLine.setupUserInterface);
        window.addEventListener("load", pl.v.createClass.setupUserInterface);
        window.addEventListener("load", pl.v.deleteClass.setupUserInterface);
        window.addEventListener("load", pl.v.clearAll.setupUserInterface);
        window.addEventListener("load", pl.v.retrieveAndListAllClasses.updateView);
        window.addEventListener("load", pl.v.export.setupUserInterface);
        window.addEventListener("load", pl.v.load.setupUserInterface);
        window.addEventListener("load", pl.v.refresh.setupUserInterface);

     $(document).ready(function(){
            $("#addBtn").click(function(){
            $("#addModal").modal();
            $("#deleteButton").hide();
            $("#editButton").hide();
            $("#deleteAllButton").hide();
            $("#exportButton").hide();
            $("#loadButton").hide();
            
           });
        });


        $(document).ready(function(){
            $("#deleteBtn").click(function(){
            $("#addModal").modal();
            $("#addButton").hide();
            $("#editButton").hide();
            $("#deleteAllButton").hide();
            $("#exportButton").hide();
            $("#loadButton").hide();

           });
        });


        $(document).ready(function(){
            $("#editBtn").click(function(){
            $("#addModal").modal();
            $("#deleteButton").hide();
            $("#addButton").hide();
            $("#deleteAllButton").hide();
            $("#exportButton").hide();
            $("#loadButton").hide();
            
           });
        });


        $(document).ready(function(){
            $("#exportBtn").click(function(){
            $("#addModal").modal();
            $("#deleteButton").hide();
            $("#editButton").hide();
            $("#deleteAllButton").hide();
            $("#addButton").hide();
            $("#loadButton").hide();
            
           });
        });

        $(document).ready(function(){
            $("#loadBtn").click(function(){
            $("#addModal").modal();
            $("#deleteButton").hide();
            $("#editButton").hide();
            $("#deleteAllButton").hide();
            $("#exportButton").hide();
            $("#addButton").hide();
            
           });
        });

        $(document).ready(function(){
            $("#deleteAllBtn").click(function(){
            $("#addModal").modal();
            $("#deleteButton").hide();
            $("#editButton").hide();
            $("#addButton").hide();
            $("#exportButton").hide();
            $("#loadButton").hide();
        
           });
        });




    </script>
</head>

<body>
    <h1 class = navBar> Welcome to our UML Editor!</h1>

    <div id = mode>
        <button type="button" name="cliMode" class="btn btn-warning btn-block">Click Here for CLI Mode (needs connection)</button>

        <button type="button" name="guiMode" class="btn btn-warning btn-block">Click Here for Gui Mode (needs connection)</button>
    </div>

    <!-- buttons for navigation -->
    <div class="container">
    
      <h1>UML Class Options</h1>
      <!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-success btn-lg" id="addBtn">Add Class</button>
      <button type="button" class="btn btn-danger btn-lg" id="deleteBtn">Delete Class</button>
      <button type="button" class="btn btn-success btn-lg" id="editBtn">Edit Class</button>
      <button type="button" class="btn btn-warning btn-lg" id="exportBtn">Export Data to File</button>
      <button type="button" class="btn btn-info btn-lg" id="loadBtn"> Load Data from a file</button>
      <button type="button" class="btn btn-warning btn-lg" id="deleteAllBtn"> Delete all classes</button>

    

    <hr />
    <form id="CLIForm">
        <div><label>
                >
                <input id="cli"> type 'help' to see commands
            </label></div>
    </form>
    <hr />
    <table id="classes">
        <caption>Classes</caption>
        <thead>
            <tr>
                <th>Name</th>
            </tr>
            <tr>
                <th>
                    Variables
                </th>
            </tr>
            <tr>
                <th>
                    Methods
                </th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    

    <!-- Modal -->
    <div class="modal fade" id="addModal" role="dialog">
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"> Fill in the class name</h4>
        </div>
        <!--body -->
        <div class="modal-body">
        <form id="UMLClass">
            <div>
            <label>
                    Class name:
                    <input name="name" />
            </label>
            <br>
            </div>

            <div id="addButton"><button type="button" name="add">Add</button></div>
            <div id="deleteButton"><button type="button" name="delete">Delete</button></div>
            <div id="editButton"><button type="button" name="edit">Edit</button></div>
            <div id="deleteAllButton"><button type="button" name="clearAll">Delete All Classes</button></div>
            <div id="exportButton"><button type="button" name="export">Export Data to File</button></div>
            <div id="loadButton"><button type="button" name="load">Load Data from File</button>
                <input type="file" id="loadfile">
            </div>
            <div id="refreshButton"><button type="button" name="refresh">Refresh View</button></div>         
        </form>
        <!-- footer -->
        </div>
            <div class="modal-footer">
                <p> Please review all changes before pushing button </p>
            </div>
        </div>
    </div>
    </div>

    <div id="classBox">
        <div id="classBoxName">Should be class name</div>
        <p>Methods, instances.class.methods</p>
        <hr></hr>
        <p>Variables, instances.class.variables</p>
        <hr></hr>
        <p>Related To, instances.class.edges</p>
      </div>
</body>

</html>
